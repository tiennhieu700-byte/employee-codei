<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>员工码</title>

<link rel="apple-touch-icon" href="icon-180.png">
<link rel="manifest" href="manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">

<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>

<style>
body{
  margin:0;
  background:#2f3443;
  font-family:-apple-system,BlinkMacSystemFont,"PingFang SC";
  color:#fff;
}
.header{
  padding:50px 20px 20px;
  font-size:20px;
  color:#f5d28b;
}
.panel{
  width:320px;
  margin:0 auto;
  background:#fff;
  border-radius:10px;
  overflow:hidden;
  text-align:center;
  color:#000;
}
.tip{
  background:#f4b400;
  color:#fff;
  padding:12px;
  font-size:14px;
}
.time{
  margin:12px 0;
  font-size:14px;
}
#qrcode{
  margin:10px auto;
}
.refresh{
  font-size:13px;
  color:#999;
}
.status{
  margin-top:10px;
  font-size:22px;
  color:#2ecc71;
}
.countdown{
  font-size:18px;
  color:#2ecc71;
  margin-bottom:10px;
}
.footer{
  max-width:320px;
  margin:20px auto;
  font-size:13px;
  color:#ddd;
  line-height:1.6;
  text-align:center;
}
</style>
</head>

<body>

<div class="header">
  V25090035 (Nguyễn Tất Khanh)
</div>

<div class="panel">
  <div class="tip">将二维码对准扫描器扫码进出场</div>
  <div class="time" id="time"></div>
  <div id="qrcode"></div>
  <div class="refresh">刷新二维码</div>
  <div class="status">已生效</div>
  <div class="countdown" id="countdown">00:00:00</div>
</div>

<div class="footer">
尊敬的员工您好，您已进入企业涉密区域，出于企业安全考虑，您的手机摄像头将被禁止拍摄，感谢您的配合。
</div>

<script>
// ===== HIỂN THỊ THỜI GIAN HIỆN TẠI =====
function updateTime(){
  const d = new Date();
  document.getElementById("time").innerText =
    `${d.getFullYear()}-${d.getMonth()+1}-${d.getDate()} ${d.toTimeString().slice(0,8)}`;
}
setInterval(updateTime,1000);
updateTime();

// ===== ĐẾM TĂNG TỪ 00:00:00 → 12:00:00 =====
let totalSeconds = 0;
const maxSeconds = 12 * 60 * 60;

setInterval(() => {
  if (totalSeconds > maxSeconds) return;

  let h = Math.floor(totalSeconds / 3600);
  let m = Math.floor((totalSeconds % 3600) / 60);
  let s = totalSeconds % 60;

  document.getElementById("countdown").innerText =
    `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;

  totalSeconds++;
}, 1000);

// ===== QR CODE =====
new QRCode(document.getElementById("qrcode"),{
  text: JSON.stringify({
    emp: "V25102128",
    name: "Mong Tien Nhieu",
    zone: "SECURE",
    start: new Date().toISOString()
  }),
  width:220,
  height:220,
  correctLevel:QRCode.CorrectLevel.H
});
</script>

</body>
</html>
